extends ../../layout/default.pug

include ../../mixins/filterStatus.pug
include ../../mixins/search.pug
include ../../mixins/pagination.pug

block main 
    h1 Danh sách sản phẩm
    .card.mb-3 
        .card-header
            h5.card-title Bộ lọc và tìm kiếm
        .card-body
            .row
                .col-6
                    +filterStatus(filterStatus)
                .col-6 
                    +search(keyword)
                            

    .card.mb-3
        .card-header
            h5.card-title Danh sách sản phẩm
        .card-body 
            .table-responsive
                table.table.table-hover.table-sm 
                    thead 
                        tr
                            th STT
                            th Hình ảnh
                            th Tên sản phẩm
                            th Giá
                            th Giảm giá
                            th Trạng thái
                            th Hành động
                    tbody
                        each item, index in products  
                            tr
                                td #{index + 1}
                                td 
                                    img.img-thumbnail(src=item.thumbnail, alt=item.title width="100px" height="auto")
                                td #{item.title}
                                td #{item.price} $
                                td #{item.discountPercentage} %
                                td
                                    if item.status == 'active'
                                        a(
                                            href=`javascript:`
                                            data-status=item.status
                                            data-id=item._id
                                            button-change-status
                                            class="badge bg-success"
                                        ) Hoạt động
                                    else
                                        a(
                                            href=`javascript:`
                                            data-id=item._id
                                            data-status=item.status
                                            button-change-status
                                            class="badge bg-danger" 
                                        ) Không hoạt động
                                td                                
                                    button(
                                    class=`btn btn-warning btn-sm margin-right: 8px`,
                                    style="margin-right: 8px"
                                    ) Sửa        
                                    button(class=`btn btn-danger btn-sm`) Xóa


    +pagination(pagination)

    //- Form change status nhằm thay đổi trạng thái của sản phẩm
    form(
        action=""
        method="POST" 
        id="form-change-status"
        data-path=`${prefixAdmin}/products/change-status`
    )





    script(src="/admin/js/productScripts.js") 

